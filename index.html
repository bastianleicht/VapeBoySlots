<!DOCTYPE html>
<html lang="de">
	<head>
		<title>Vape Boy Slot</title>
		<link rel="stylesheet" href="style/game.css">

		<script src="js/jquery-2.1.0.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/jquery.easing.1.3.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/jcanvas.js"	type="text/javascript" charset="utf-8"></script>
		<script src="js/jquery.jSlots.js" type="text/javascript" charset="utf-8"></script>
		<script>
			function DoFullScreen() {
				let isInFullScreen = (document.fullScreenElement && true) ||    // alternative standard method
						(document.mozFullScreen || document.webkitIsFullScreen);
				
				let docElm = document.documentElement;
				if (!isInFullScreen) {

					if (docElm.requestFullscreen) {
						docElm.requestFullscreen();
					}
					else if (docElm.mozRequestFullScreen) {
						docElm.mozRequestFullScreen();
					}
					else if (docElm.webkitRequestFullScreen) {
						docElm.webkitRequestFullScreen();
					}
				} else {
					document.exitFullscreen();
				}
			}
		</script>
	</head>
	<body style="background-color: slategray; background-image: url(./images/affe.png);">
	<div class="container show l23 loaded" style="background-color: white;">
		<div class="dvLoading">
			Wird geladen...
			<div class="objItem1 dvSizeNull"></div>
			<div class="objItem2 dvSizeNull"></div>
			<div class="objItem3 dvSizeNull"></div>
			<div class="objItem4 dvSizeNull"></div>
			<div class="objItem5 dvSizeNull"></div>
			<div class="objItem6 dvSizeNull"></div>
			<div class="objItem7 dvSizeNull"></div>
			<div class="objItem8 dvSizeNull"></div>
			<div class="objItem9 dvSizeNull"></div>
			<div class="objItem10 dvSizeNull"></div>
			<div class="objItem11 dvSizeNull"></div>
			<div class="objItem12 dvSizeNull"></div>
		</div>

		<div class="headlineContainer" style="background-image: url('./images/background/bg_top.png');"></div>

		<div class="gameContainer" style="background-image: url('./images/background/bg_middle.png');">
			<style>
				.gradient-border {
					--borderWidth: 4px;
					background: #1D1F20;
					position: relative;
					border-radius: var(--borderWidth);
				}
				.gradient-border:after {
					content: '';
					position: absolute;
					top: calc(-1 * var(--borderWidth));
					left: calc(-1 * var(--borderWidth));
					height: calc(100% + var(--borderWidth) * 2);
					width: calc(100% + var(--borderWidth) * 2);
					background: linear-gradient(60deg, #f79533, #f37055, #ef4e7b, #a166ab, #5073b8, #1098ad, #07b39b, #6fba82);
					border-radius: calc(2 * var(--borderWidth));
					z-index: -1;
					animation: animatedgradient 3s ease alternate infinite;
					background-size: 300% 300%;
				}

				@keyframes animatedgradient {
					0% {
						background-position: 0% 50%;
					}
					50% {
						background-position: 100% 50%;
					}
					100% {
						background-position: 0% 50%;
					}
				}
			</style>
			<div class="dvGame gradient-border">
				<div class="dvCenter">
					<div class="dvCol">
						<ul class="ulSlot">
							<li class="objItem11"></li>
							<li class="objItem8"></li>
							<li class="objItem7"></li>
						</ul>
					</div>
				</div>
			</div>
		</div>

			<div class="mainControlBox">
				<div class="fullscreenWorkaround"></div>
				<div class="mainControlBoxBG">
					<div class="console webConsole de">

						<div class="mainBox">
							<div>
								<div class="fl userInfoContainer orangeButtonsActWinContainer">
									<div class="orangeButtonsBox">
										<div class="fl controlButton small controlButtonOrange controlButton_lines justShow">
											<div class="clickArea plus controlButton_linesplus" id="increaseLines" style="visibility: visible;"></div>
											<div class="clickArea minus controlButton_linesminus" id="decreaseLines" style="visibility: visible;"></div>
											<div class="twolined infoArea">
												<div class="infoValue value_lines" id="betLines"><span class="value">10</span></div>
												<div class="infoLabel">LINIEN</div>
											</div>
										</div>
										<div class="fr controlButton small controlButtonOrange controlButton_linebet">
											<div class="clickArea plus controlButton_linebetplus" id="increaseBet" style="visibility: visible;"></div>
											<div class="clickArea minus controlButton_linebetminus" id="decreaseBet" style="visibility: visible;"></div>
											<div class="twolined infoArea">
												<div class="infoValue value_linebet "><span class="value" id="betBase">2,00</span></div>
												<div class="infoLabel">EINSATZ</div>
											</div>
										</div>
										<div class="clear"></div>
									</div>
								</div>
								<div class="fl userInfoContainer userInfo">
									<div class="row1">
										<div class="userInfoBox">
											<div class="infoText info_none hidden"></div>
											<div class="infoText scaledOnce" id="info_pleasePressSpin">Bitte START dr&uuml;cken</div>
											<div class="infoText hidden" id="info_win">GEWINN <span class="value" id="betAward"></span></div>
											<div class="infoText hidden" id="info_winFreegames">GEWINN: <span class="value">10</span> FREISPIELE</div>
											<div class="infoText hidden" id="info_freegame">FREISPIEL <span class="value"  id="currFreegame"></span> von <span class="maxFreegames">10</span></div>
											<div class="infoText info_endFreegames hidden">Ende der FREISPIELE</div>
											<div class="infoText hidden" id="info_notEnoughCoins">Nicht gen&uuml;gend GUTHABEN</div>
										</div>
									</div>
									<div class="row2">
										<div class="leftBox userInfoBox value_totalbet">
											<span class="infoLabel">GESAMT EINSATZ</span>
											<span class="infoValue"><span class="value" id="betValue"><span class="currLeft"></span>1.00</span></span>
										</div>
										<div class="rightBox userInfoBox balanceBox">
											<div class="value_money">
												<span class="infoLabel moneyLabel">GUTHABEN</span>
												<span class="infoValue"><span class="value" id="betCredits"><span class="currLeft"></span>1000,00</span></span>
											</div>
										</div>
									</div>
								</div>
								<div class="clear"></div>
							</div>
							<div class="actionButtons">
								<!-- TODO: Add Loop for "pulse" Class -->
								<div class="fr controlButton big reactsToPressSpace spinButton controlButton_spin isPulsing pulse" id="playFancy"></div>
								<div class="fr controlButton controlButtonGreen controlButton_autospin autospinChoiceEntry" id="buttonAutoSpin">AUTO</div>
								<div class="clear"></div>
							</div>

					</div>

					<div class="headlineButtons">
						<div class="fl controlButton controlButton_fullscreen" onclick="DoFullScreen();"></div>
						<div class="clear"></div>
					</div>

					<div class="versionDisplay">
						<span class="slotName">VAPE BOY</span>
						<span class="slotVersion"> 1.0.0</span>
					</div>
				</div>
			</div>

			</div>
	</div>
	<script>
		function pick(arg, def) { return (typeof arg == 'undefined' ? def : arg); }

		function float2Coins(num,start) {
			let x = 0;
			start = pick(start, '');
			if( num < 0 ) {
				num = Math.abs(num);
				x = 1;
			}
			if(isNaN(num)) num = "0";

			let cents = Math.floor((num * 100 + 0.5) % 100);

			num = Math.floor((num*100+0.5)/100).toString();

			if(cents < 10) cents = "0" + cents;
			for (let i = 0; i < Math.floor((num.length-(1+i))/3); i++) {
				num = num.substring(0,num.length-(4*i+3))+'.' +num.substring(num.length-(4*i+3));
			}

			let ret = start + num + ',' + cents;

			if (x === 1) ret = ' - ' + ret; return ret;
		}
	</script>
	<script type="text/javascript" charset="utf-8">
			let _pulseInterval;

			$(window).load(function() {
				$('.dvLoading').hide();
			});

			$('.ulSlot').jSlots({
				number : 5,
				winnerNumber : 7,
				spinner : '#playFancy',
				autoplay: '#buttonAutoSpin',
				betIncrease: '#increaseBet',
				betDecrease: '#decreaseBet',
				linesIncrease: '#increaseLines',
				linesDecrease: '#decreaseLines',
				easing : 'linear',
				time : 2000,
				loops : 16,
				onStart : function() {
					console.log('onStart')
					$('.dvSlot').removeClass('winner');
					$('#playFancy').removeClass('isPulsing pulse');
					$('#info_pleasePressSpin').addClass('hidden');
				},
				onEnd : function () {
					console.log('onEnd')
					$('#playFancy').addClass('isPulsing');
					$('#info_pleasePressSpin').removeClass('hidden');
				},
				onWin : function(winCount, winners) {
					console.log('onWin')
					// only fires if you win
					$('#playFancy').addClass('isPulsing');

					$.each(winners, function() {
						this.addClass('winner');
					});

					// react to the # of winning slots
					if ( winCount === 1 ) {
						//alert('You got ' + winCount + ' 7!!!');
					} else if ( winCount > 1 ) {
						//alert('You got ' + winCount + ' 7?s!!!');
					}

				}
			});

			function pulse() {
				//pulseElement.addClass('isPulsing');
				_pulseInterval = setInterval(function () {
					const pulseElement = $('#playFancy');
					if(pulseElement.hasClass('pulse')) {
						pulseElement.removeClass('pulse')
					} else {
						pulseElement.addClass('pulse')
					}
					//clearInterval(_interval);
				}, 500);
			}

			_interval1 = setInterval(function () {
				const pulseElement = $('#playFancy');
				if(pulseElement.hasClass('isPulsing')) {
					if(pulseElement.hasClass('pulse')) {
						pulseElement.removeClass('pulse')
					} else {
						pulseElement.addClass('pulse')
					}
				}
				//clearInterval(_interval);
			}, 500);

			function log(text, arguments) {
				if(!arguments) arguments = ' ';
				let d = new Date();
				let hours = d.getHours();
				if (hours < 10)
					hours = "0" + hours;
				let minutes = d.getMinutes();
				if (minutes < 10)
					minutes = "0" + minutes;
				let seconds = d.getSeconds();
				if (seconds < 10)
					seconds = "0" + seconds;
				console.log("%c[VapeBoy] [" + hours + ":" + minutes + ":" + seconds + "] > %c" + text + arguments, 'color: rebeccapurple;', 'color: unset;')
			}
		</script>
	</body>
</html>
